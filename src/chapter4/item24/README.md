# ITEM 24 멤버 클래스는 되도록 static으로 만들라

--------------------------------------------

#### 중첩 클래스
* 다른 클래스 안에 정의된 클래스이다
* 자신을 감싼 바깥 클래스에서만 사용 되어야 한다
  * 다르게 사용하는 경우는 톱레벨 클래스로 만들어야 한다
* 중첩 클래스의 종류는 정적 멤버 클래스, 멤버 클래스(비정적 클래스), 익명 클래스, 지역 클래스가 있다
  * 첫 번째를 제외한 나머지 클래스는 내부 클래스다

#### 정적 멤버 클래스
* 다른 클래스 안에 선언된다
* 바깥 클래스의 private 멤버에도 접근할 수 있다
  * 나머지는 일반 클래스와 같다
* 정적 멤버 클래스는 다른 정적 멤버와 똑같은 접근 규칙을 적용받는다
  * private로 선언하면 바깥 클래스에서만 접근 가능하다
* 정적 멤버 클래스는 바깥 클래스와 함께 사용되는 경우 public 도우미로 유용하게 쓰인다
* 정적 멤버 클래스와 멤버 클래스의 문법 차이는 static의 유무 이지만 큰 의미를 가지고 있다
  * 비정적 멤버 클래스의 인스턴스는 바깥 클래스의 인스턴스와 암묵적으로 연결된다
  * 비정적 멤버 클래스의 인스턴스 메서드에서 정규화된 this를 사용해 바깥 인스턴스의 메서드를 호출하거나 참조를 가져올 수 있다
  * 개념상 중첩 클래스의 인스턴스가 바깥 인스턴스와 독립적으로 존재할 수 있다면 정적 멤버 클래스로 만들어야 한다
    * 비정적 멤버 클래스는 바깥 인스턴스 없이는 생성할 수 없기 때문
* 멤버 클래스에서 바깥 인스턴스에 접근할 일이 없다면 무조건 static을 사용하여 정적 멤버 클래스로 만들자
* private 정적 멤버 클래스는 바깥 클래스가 표현하는 객체의 한 부분을 나타낼때 사용한다

#### 비정적 멤버 클래스
* 비정적 멤버 클래스의 인스턴스와 바깥 인스턴스 사이의 관계는 멤버 클래스가 인스턴스화 될때 확립된다
  * 이후 변경은 불가능하다
  * 이러한 관계 정보는 비정적 멤버 클래스의 인스턴스 안에 만들어지며 메모리를 차지하고 생성 시간도 지연된다
* 어탭터를 정의할 때 자주 사용된다
  * 어떤 클래스의 인스턴스를 감싸 마치 다른 클래스의 인스턴스처럼 보이게 하는 경우 사용
* 가지비 컬렉션이 바깥 클래스의 인스턴스를 수거하지 못해 메모리 누수가 발생하는 경우가 생길수도 있다
* 참조가 눈에 보이지 않아 디버깅이 힘들다

#### 익명 클래스
* 이름이 없는 클래스이다
* 바깥 클래스의 멤버가 아니다
* 멤버와 다르게 사용되는 시점에 선언과 동시에 인스턴스가 만들어진다
* 코드의 위치에 상관없이 어디서든 만들수 있다
* 비정적인 문맥에서 사용되는 경우에만 바깥 클래스의 인스턴스를 참조 가능하다
* 정적 문맥에서도 상수 변수 이외의 정적 멤버는 가질 수 없다
* 상수 표현을 위해 초기화된 final 기본 타입과 문자열 필드만 가질 수 있다
* 응용하여 사용하기엔 제약이 많아 적합하지 않다
  * 선언된 지점에서만 인스턴스 생성 가능
  * instanceof 검사나 클래스의 이름이 필요한 경우 사용 불가능
  * 여러 인터페이스를 구현 불가능
  * 인터페이스를 구현하면서 동시에 다른 클래스를 상속 받을 수 없음
* 익명 클래스를 사용하는 클라이언트는 그 익명 클래스가 상위 타입에서 상속한 멤버 외에는 호출이 불가능하다
* 표현식 중간에 등장하기 때문에 코드가 길면 가독성이 떨어진다 (10자 내외)
* 람다를 지원하기 전에는 즉석에서 작은 함수 객체나 처리 객체를 만드는데 사용했다
* 정적 팩터리를 만드는 경우에 많이 사용한다

#### 지역 클래스
* 네가지 중에 가장 안쓴다
* 지역변수를 선언할 수 있는 곳이라면 어디든 선언 가능하다
* 유효범위도 지역변수와 같다
* 멤버 클래스처럼 이름이 있으며 반복해서 사용 가능하다
* 익명 클래스처럼 비정적 문맥에서 사용될 때만 바깥 인스턴스를 참조 가능하다
* 정적 멤버는 가질 수 없으며 가독성을 위해 짧게 작성해야 한다

#### 메서드 밖에서 사용하거나 메서드 안에 정의하기 길다면 멤버클래스를 고려하자
#### 멤버 클래스의 인스턴스 각각이 바깥 인스턴스를 참조한다면 비정적 멤버 클래스를 고려하자
#### 그게 아니라면 정적 멤버 클래스를 고려하자
#### 중첩 클래스가 한 메서드 안에서만 쓰이면서 그 인스턴스를 생성하는 곳이 하나이며 해당 타입으로 쓰기 좋은 클래스나 인터페이스가 있으면 익명 클래스를 고려하자
#### 이런 경우가 아니라면 지역 클래스로 만들자